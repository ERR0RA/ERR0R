<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Advanced Maths Practice</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6fa;
    text-align: center;
    padding: 20px;
}

.container {
    background: white;
    max-width: 900px;
    margin: auto;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}

select, button, input {
    padding: 8px;
    margin: 8px;
    font-size: 16px;
}

.question {
    font-size: 22px;
    margin: 20px 0;
}

.calculator {
    font-size: 16px;
    color: #555;
    margin-bottom: 10px;
}

.score {
    margin-top: 20px;
    font-weight: bold;
}
</style>
</head>
<body>

<div class="container">
<h1>Advanced Maths Practice</h1>

<label>Topic:</label>
<select id="topic">
    <option value="expand">Algebra - Expanding</option>
    <option value="factor">Algebra - Factorising</option>
    <option value="simplify">Simplifying Fractions</option>
    <option value="probability">Experimental Probability</option>
    <option value="ratio">Ratio</option>
    <option value="similar">Similar Shapes</option>
</select>

<label>Difficulty:</label>
<select id="difficulty">
    <option value="easy">Easy</option>
    <option value="medium">Medium</option>
    <option value="hard">Hard</option>
    <option value="veryhard">Very Hard (Calculator Allowed)</option>
</select>

<br>
<button onclick="generateQuestion()">New Question</button>

<div class="question" id="questionArea"></div>
<div class="calculator" id="calculatorHint"></div>

<input type="text" id="answerInput" placeholder="Enter answer here">
<br>
<button onclick="checkAnswer()">Submit</button>

<div id="feedback"></div>
<div class="score" id="score">Score: 0</div>
</div>

<script>
let currentAnswer;
let score = 0;

function rand(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

function generateQuestion() {
    const topic = document.getElementById("topic").value;
    const difficulty = document.getElementById("difficulty").value;
    const q = document.getElementById("questionArea");
    const hint = document.getElementById("calculatorHint");
    document.getElementById("feedback").innerText="";
    document.getElementById("answerInput").value="";
    currentAnswer = null;

    // ================= ALGBRA - EXPANDING =================
    if(topic==="expand"){
        let a=rand(1,5),b=rand(0,5),c=rand(1,5),d=rand(0,5);
        if(difficulty==="easy"){
            q.innerHTML=`Expand: (${a}x + ${b})(${c}x + ${d})`;
            currentAnswer=`${a*c}x^2 + ${a*d + b*c}x + ${b*d}`;
            hint.innerText="Calculator not needed";
        }
        if(difficulty==="medium"){
            a=rand(1,10); b=rand(1,10); c=rand(1,10); d=rand(1,10);
            q.innerHTML=`Expand: (${a}x - ${b})(${c}x + ${d})`;
            currentAnswer=`${a*c}x^2 + ${a*d - b*c}x - ${b*d}`;
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="hard"){
            a=rand(1,5); b=rand(1,5);
            q.innerHTML=`Expand and simplify: (${a}x + ${b})^2`;
            currentAnswer=`${a*a}x^2 + ${2*a*b}x + ${b*b}`;
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="veryhard"){
            a=rand(1,5); b=rand(1,5); c=rand(1,5); d=rand(1,5);
            q.innerHTML=`Expand fully: (${a}x + ${b})(${c}x - ${d}) + (${b}x + ${c})(${d}x - ${a})`;
            let term1_x2 = a*c;
            let term1_x = a*(-d) + b*c;
            let term1_const = b*(-d);
            let term2_x2 = b*d;
            let term2_x = b*(-a) + c*d;
            let term2_const = c*(-a);
            let total_x2 = term1_x2 + term2_x2;
            let total_x = term1_x + term2_x;
            let total_const = term1_const + term2_const;
            currentAnswer = `${total_x2}x^2 + ${total_x}x + ${total_const}`;
            hint.innerText="Calculator allowed";
        }
    }

    // ================= ALGBRA - FACTORISING =================
    if(topic==="factor"){
        if(difficulty==="easy"){
            let a=rand(1,5),b=rand(1,5);
            q.innerHTML=`Factorise: ${a*b}x + ${a*b*2}`;
            currentAnswer=`${a}(${b}x + ${b*2})`;
            hint.innerText="Calculator not needed";
        }
        if(difficulty==="medium"){
            let a=rand(1,5),b=rand(1,5),c=rand(1,5);
            q.innerHTML=`Factorise: ${a*b}x^2 + ${a*c}x`;
            currentAnswer=`${a}x(${b}x + ${c})`;
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="hard"){
            let a=rand(1,5),b=rand(1,10),c=rand(1,10);
            q.innerHTML=`Factorise: ${a}x^2 + ${b}x + ${c}`;
            currentAnswer=`Quadratic factors (calculator may help)`;
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="veryhard"){
            let a=rand(2,5),b=rand(1,10),c=rand(1,5);
            q.innerHTML=`Factorise: ${a}x^2 + ${b}x + ${c}`;
            currentAnswer=`Complex quadratic — calculator allowed`;
            hint.innerText="Calculator allowed";
        }
    }

    // ================= SIMPLIFYING FRACTIONS =================
    if(topic==="simplify"){
        let numerator, denominator;
        if(difficulty==="easy"){
            numerator = rand(2,20); denominator = rand(2,10);
            q.innerHTML=`Simplify: ${numerator}/${denominator}`;
            let g= gcd(numerator,denominator);
            currentAnswer = `${numerator/g}/${denominator/g}`;
            hint.innerText="Calculator not needed";
        }
        if(difficulty==="medium"){
            numerator = rand(10,50); denominator = rand(2,20);
            q.innerHTML=`Simplify: ${numerator}/${denominator}`;
            let g= gcd(numerator,denominator);
            currentAnswer = `${numerator/g}/${denominator/g}`;
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="hard"){
            numerator = rand(20,100); denominator = rand(5,50);
            q.innerHTML=`Simplify: ${numerator}/${denominator}`;
            let g= gcd(numerator,denominator);
            currentAnswer = `${numerator/g}/${denominator/g}`;
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="veryhard"){
            numerator = rand(50,200); denominator = rand(10,100);
            q.innerHTML=`Simplify: ${numerator}/${denominator}`;
            let g= gcd(numerator,denominator);
            currentAnswer = `${numerator/g}/${denominator/g}`;
            hint.innerText="Calculator allowed";
        }
    }

    // ================= EXPERIMENTAL PROBABILITY =================
    if(topic==="probability"){
        let success, total;
        if(difficulty==="easy"){ success=rand(1,5); total=rand(5,10); }
        if(difficulty==="medium"){ success=rand(2,8); total=rand(10,20); }
        if(difficulty==="hard"){ success=rand(5,15); total=rand(15,30); }
        if(difficulty==="veryhard"){ success=rand(5,15); total=rand(15,30); let extra=rand(1,10); success+=extra; }

        q.innerHTML=`Event occurs ${success} times out of ${total} trials. Find probability (decimal).`;
        currentAnswer = (success/total).toFixed(2);
        hint.innerText=(difficulty==="easy")?"Calculator not needed":"Calculator allowed";
    }

    // ================= RATIO =================
    if(topic==="ratio"){
        let a,b,c,sum,scale;
        if(difficulty==="easy"){
            a=rand(1,5); b=rand(1,5);
            q.innerHTML=`Simplify ratio ${a*2}:${b*2}`;
            currentAnswer=`${a}:${b}`;
            hint.innerText="Calculator not needed";
        }
        if(difficulty==="medium"){
            a=rand(1,5); b=rand(1,5); sum=(a+b)*rand(2,5);
            q.innerHTML=`Share ${sum} in ratio ${a}:${b}. First person gets?`;
            currentAnswer=(sum*a/(a+b)).toFixed(2);
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="hard"){
            a=rand(2,6); b=rand(2,6); c=rand(2,6); sum=(a+b+c)*rand(3,7);
            q.innerHTML=`Three numbers are in ratio ${a}:${b}:${c}. Sum is ${sum}. Largest number?`;
            currentAnswer=(c*sum/(a+b+c)).toFixed(2);
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="veryhard"){
            a=rand(2,8); b=rand(2,8); c=rand(2,8); d=rand(2,8); sum=rand(50,200);
            let numbers=[a,b,c,d].map(x=>x*sum/(a+b+c+d)).sort((x,y)=>x-y);
            q.innerHTML=`Four numbers in ratio ${a}:${b}:${c}:${d}. Sum=${sum}. Second largest?`;
            currentAnswer=numbers[2].toFixed(2);
            hint.innerText="Calculator allowed";
        }
    }

    // ================= SIMILAR SHAPES =================
    if(topic==="similar"){
        let scale, small, large;
        if(difficulty==="easy"){
            scale=rand(2,5); small=rand(2,10);
            q.innerHTML=`Scale factor ${scale}, small length=${small}cm. Find large length.`;
            currentAnswer=(small*scale).toFixed(2);
            hint.innerText="Calculator not needed";
        }
        if(difficulty==="medium"){
            scale=rand(2,4); small=rand(10,30);
            q.innerHTML=`Scale factor ${scale}, small area=${small}cm². Find large area.`;
            currentAnswer=(small*Math.pow(scale,2)).toFixed(2);
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="hard"){
            scale=rand(2,4); small=rand(5,20);
            q.innerHTML=`Scale factor ${scale}, small volume=${small}cm³. Find large volume.`;
            currentAnswer=(small*Math.pow(scale,3)).toFixed(2);
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="veryhard"){
            scale=rand(2,5); small=rand(10,50); small2=rand(5,25);
            q.innerHTML=`Scale factor ${scale}, small volumes=${small}cm³ and ${small2}cm³. Find difference in large volumes.`;
            currentAnswer=(Math.abs(small-small2)*Math.pow(scale,3)).toFixed(2);
            hint.innerText="Calculator allowed";
        }
    }
}

// ================= Check Answer =================
function checkAnswer(){
    let userAnswer=document.getElementById("answerInput").value.replace(/\s+/g,'');
    let correct=currentAnswer.toString().replace(/\s+/g,'');
    if(!currentAnswer) return;

    if(!isNaN(userAnswer) && !isNaN(correct)){
        if(Math.abs(parseFloat(userAnswer)-parseFloat(correct))<0.01){
            score++;
            document.getElementById("feedback").innerText="Correct!";
        }else{
            document.getElementById("feedback").innerText="Incorrect. Correct answer: "+currentAnswer;
        }
    }else{
        if(userAnswer.toLowerCase()===correct.toLowerCase()){
            score++;
            document.getElementById("feedback").innerText="Correct!";
        }else{
            document.getElementById("feedback").innerText="Incorrect. Correct answer: "+currentAnswer;
        }
    }
    document.getElementById("score").innerText="Score: "+score;
}

// ================= GCD helper =================
function gcd(a,b){return b===0?a:gcd(b,a%b);}

generateQuestion();
</script>

</body>
</html>
<html>
<hr>
<div>
        <p>Hint for calculator allowed factorizing algebra use quadratic formula.</p>
    </div>
</html>
