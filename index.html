<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Advanced Maths Practice</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6fa;
    text-align: center;
    padding: 20px;
}

.container {
    background: white;
    max-width: 700px;
    margin: auto;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}

select, button, input {
    padding: 8px;
    margin: 8px;
    font-size: 16px;
}

button {
    cursor: pointer;
}

.question {
    font-size: 22px;
    margin: 20px 0;
}

.score {
    margin-top: 20px;
    font-weight: bold;
}
</style>
</head>
<body>

<div class="container">
<h1>Advanced Maths Practice</h1>

<label>Topic:</label>
<select id="topic">
    <option value="expand">Algebra - Expanding</option>
    <option value="factor">Algebra - Factorising</option>
    <option value="simplify">Simplifying Fractions</option>
    <option value="probability">Experimental Probability</option>
</select>

<label>Difficulty:</label>
<select id="difficulty">
    <option value="easy">Easy</option>
    <option value="medium">Medium</option>
    <option value="hard">Hard</option>
</select>

<br>

<button onclick="generateQuestion()">New Question</button>

<div class="question" id="questionArea"></div>

<input type="text" id="answerInput" placeholder="Enter answer here">

<br>

<button onclick="checkAnswer()">Submit</button>

<div id="feedback"></div>
<div class="score" id="score">Score: 0</div>

</div>

<script>
let currentAnswer;
let score = 0;

function rand(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function generateQuestion() {
    const topic = document.getElementById("topic").value;
    const difficulty = document.getElementById("difficulty").value;
    const questionArea = document.getElementById("questionArea");
    document.getElementById("feedback").innerText = "";
    document.getElementById("answerInput").value = "";

    if (topic === "expand") {
        if (difficulty === "easy") {
            let a = rand(2,5);
            let b = rand(1,5);
            questionArea.innerHTML = `Expand: ${a}(x + ${b})`;
            currentAnswer = `${a}x+${a*b}`;
        }
        if (difficulty === "medium") {
            let a = rand(2,6);
            let b = rand(1,6);
            let c = rand(1,6);
            questionArea.innerHTML = `Expand: ${a}(x + ${b}) + ${c}x`;
            currentAnswer = `${a+c}x+${a*b}`;
        }
        if (difficulty === "hard") {
            let a = rand(2,5);
            let b = rand(1,5);
            let c = rand(2,5);
            let d = rand(1,5);
            questionArea.innerHTML = `Expand: (${a}x + ${b})(${c}x + ${d})`;
            currentAnswer = `${a*c}x^2+${a*d + b*c}x+${b*d}`;
        }
    }

    if (topic === "factor") {
        if (difficulty === "easy") {
            let a = rand(2,6);
            let b = rand(1,6);
            questionArea.innerHTML = `Factorise: ${a}x + ${a*b}`;
            currentAnswer = `${a}(x+${b})`;
        }
        if (difficulty === "medium") {
            let a = rand(2,5);
            let b = rand(1,5);
            questionArea.innerHTML = `Factorise: x^2 + ${a+b}x + ${a*b}`;
            currentAnswer = `(x+${a})(x+${b})`;
        }
        if (difficulty === "hard") {
            let a = rand(2,5);
            let b = rand(1,5);
            let c = rand(2,5);
            questionArea.innerHTML = `Factorise: ${a*c}x^2 + ${a*b + c*b}x + ${b*b}`;
            currentAnswer = `(${a}x+${b})(${c}x+${b})`;
        }
    }

    if (topic === "simplify") {
        if (difficulty === "easy") {
            let a = rand(2,5);
            questionArea.innerHTML = `Simplify: ${a}x / ${a}`;
            currentAnswer = `x`;
        }
        if (difficulty === "medium") {
            let a = rand(2,5);
            let b = rand(1,5);
            questionArea.innerHTML = `Simplify: ${a*b}x / ${a}`;
            currentAnswer = `${b}x`;
        }
        if (difficulty === "hard") {
            let a = rand(2,5);
            let b = rand(1,5);
            let c = rand(1,5);
            questionArea.innerHTML = `Simplify: (${a}x^2 + ${a*b}x) / ${a}x`;
            currentAnswer = `x+${b}`;
        }
    }

    if (topic === "probability") {
        if (difficulty === "easy") {
            let success = rand(1,10);
            let total = success + rand(1,10);
            questionArea.innerHTML = `A coin is flipped ${total} times and lands heads ${success} times. What is experimental probability of heads? (as fraction)`;
            currentAnswer = `${success}/${total}`;
        }
        if (difficulty === "medium") {
            let red = rand(5,15);
            let blue = rand(5,15);
            questionArea.innerHTML = `A bag has ${red} red and ${blue} blue balls. One ball is picked. Experimental probability of red?`;
            currentAnswer = `${red}/${red+blue}`;
        }
        if (difficulty === "hard") {
            let success = rand(10,30);
            let total = success + rand(10,30);
            questionArea.innerHTML = `A dice is rolled ${total} times and lands on 6 exactly ${success} times. Give experimental probability as decimal (3dp).`;
            currentAnswer = (success/total).toFixed(3);
        }
    }
}

function checkAnswer() {
    let userAnswer = document.getElementById("answerInput").value.replace(/\s+/g,'');
    let correct = currentAnswer.replace(/\s+/g,'');

    if (userAnswer === correct) {
        score++;
        document.getElementById("feedback").innerText = "Correct!";
    } else {
        document.getElementById("feedback").innerText = "Incorrect. Correct answer: " + currentAnswer;
    }

    document.getElementById("score").innerText = "Score: " + score;
}

generateQuestion();
</script>

</body>
</html>
