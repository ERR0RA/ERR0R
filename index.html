<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Advanced Maths Practice</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6fa;
    text-align: center;
    padding: 20px;
}

.container {
    background: white;
    max-width: 900px;
    margin: auto;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}

select, button, input {
    padding: 8px;
    margin: 8px;
    font-size: 16px;
}

.question {
    font-size: 22px;
    margin: 20px 0;
}

.calculator {
    font-size: 16px;
    color: #555;
    margin-bottom: 10px;
}

.score {
    margin-top: 20px;
    font-weight: bold;
}
</style>
</head>
<body>

<div class="container">
<h1>Advanced Maths Practice</h1>

<label>Topic:</label>
<select id="topic">
    <option value="expand">Algebra - Expanding</option>
    <option value="factor">Algebra - Factorising</option>
    <option value="simplify">Simplifying Fractions</option>
    <option value="probability">Experimental Probability</option>
    <option value="ratio">Ratio</option>
    <option value="similar">Similar Shapes</option>
</select>

<label>Difficulty:</label>
<select id="difficulty">
    <option value="easy">Easy</option>
    <option value="medium">Medium</option>
    <option value="hard">Hard</option>
    <option value="veryhard">Very Hard (Calculator Allowed)</option>
</select>

<br>
<button onclick="generateQuestion()">New Question</button>

<div class="question" id="questionArea"></div>
<div class="calculator" id="calculatorHint"></div>

<input type="text" id="answerInput" placeholder="Enter answer here">
<br>
<button onclick="checkAnswer()">Submit</button>

<div id="feedback"></div>
<div class="score" id="score">Score: 0</div>
</div>

<script>
let currentAnswer;
let score = 0;

function rand(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

function generateQuestion() {
    const topic = document.getElementById("topic").value;
    const difficulty = document.getElementById("difficulty").value;
    const q = document.getElementById("questionArea");
    const hint = document.getElementById("calculatorHint");
    document.getElementById("feedback").innerText="";
    document.getElementById("answerInput").value="";
    currentAnswer = null;

    // ================= ALGBRA - EXPANDING =================
    if(topic==="expand"){
        let a=rand(1,5),b=rand(0,5),c=rand(1,5),d=rand(0,5);
        if(difficulty==="easy"){
            q.innerHTML=`Expand: (${a}x + ${b})(${c}x + ${d})`;
            currentAnswer=`${a*c}x^2 + ${a*d + b*c}x + ${b*d}`;
            hint.innerText="Calculator not needed";
        }
        if(difficulty==="medium"){
            a=rand(1,10); b=rand(1,10); c=rand(1,10); d=rand(1,10);
            q.innerHTML=`Expand: (${a}x - ${b})(${c}x + ${d})`;
            currentAnswer=`${a*c}x^2 + ${a*d - b*c}x - ${b*d}`;
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="hard"){
            a=rand(1,5); b=rand(1,5);
            q.innerHTML=`Expand and simplify: (${a}x + ${b})^2`;
            currentAnswer=`${a*a}x^2 + ${2*a*b}x + ${b*b}`;
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="veryhard"){
            a=rand(1,5); b=rand(1,5); c=rand(1,5); d=rand(1,5);
            q.innerHTML=`Expand fully: (${a}x + ${b})(${c}x - ${d}) + (${b}x + ${c})(${d}x - ${a})`;
            let term1_x2 = a*c;
            let term1_x = a*(-d) + b*c;
            let term1_const = b*(-d);
            let term2_x2 = b*d;
            let term2_x = b*(-a) + c*d;
            let term2_const = c*(-a);
            let total_x2 = term1_x2 + term2_x2;
            let total_x = term1_x + term2_x;
            let total_const = term1_const + term2_const;
            currentAnswer = `${total_x2}x^2 + ${total_x}x + ${total_const}`;
            hint.innerText="Calculator allowed";
        }
    }

    // ================= ALGBRA - FACTORISING =================
    if(topic==="factor"){
        if(difficulty==="easy"){
            let a=rand(1,5),b=rand(1,5);
            q.innerHTML=`Factorise: ${a*b}x + ${a*b*2}`;
            currentAnswer=`${a}(${b}x + ${b*2})`;
            hint.innerText="Calculator not needed";
        }
        if(difficulty==="medium"){
            let a=rand(1,5),b=rand(1,5),c=rand(1,5);
            q.innerHTML=`Factorise: ${a*b}x^2 + ${a*c}x`;
            currentAnswer=`${a}x(${b}x + ${c})`;
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="hard"){
            let a=rand(1,5),b=rand(1,10),c=rand(1,10);
            let disc=b*b-4*a*c;
            q.innerHTML=`Factorise: ${a}x^2 + ${b}x + ${c}`;
            currentAnswer=`Quadratic factors (may require calculator)`;
            hint.innerText="Calculator recommended";
        }
        if(difficulty==="veryhard"){
            let a=rand(2,5),b=rand(1,10),c=rand(1,5);
            q.innerHTML=`Factorise: ${a}x^2 + ${b}x + ${c}`;
            currentAnswer=`Complex quadratic â€” calculator allowed`;
            hint.innerText="Calculator allowed";
        }
    }

    // ================= Keep previous topics here as needed =================
}

function checkAnswer(){
    let userAnswer=document.getElementById("answerInput").value.replace(/\s+/g,'');
    let correct=currentAnswer.toString().replace(/\s+/g,'');
    if(!currentAnswer) return;

    if(!isNaN(userAnswer) && !isNaN(correct)){
        if(Math.abs(parseFloat(userAnswer)-parseFloat(correct))<0.01){
            score++;
            document.getElementById("feedback").innerText="Correct!";
        }else{
            document.getElementById("feedback").innerText="Incorrect. Correct answer: "+currentAnswer;
        }
    }else{
        if(userAnswer.toLowerCase()===correct.toLowerCase()){
            score++;
            document.getElementById("feedback").innerText="Correct!";
        }else{
            document.getElementById("feedback").innerText="Incorrect. Correct answer: "+currentAnswer;
        }
    }
    document.getElementById("score").innerText="Score: "+score;
}

generateQuestion();
</script>
</body>
</html>
