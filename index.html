function checkAnswer(){
    let userAnswer = document.getElementById("answerInput").value
        .replace(/\s+/g,'')
        .toLowerCase();

    let correct = currentAnswer
        .replace(/\s+/g,'')
        .toLowerCase();

    let feedback = document.getElementById("feedback");

    let isCorrect = false;

    // If numeric comparison
    if(!isNaN(userAnswer) && !isNaN(correct)){
        if(parseFloat(userAnswer) === parseFloat(correct)){
            isCorrect = true;
        }
    }
    // If factorised form with two brackets
    else if(correct.includes(")(")){
        let correctParts = correct.split(")(");
        let userParts = userAnswer.split(")(");

        if(userParts.length === 2){
            // Remove brackets
            correctParts[0] = correctParts[0].replace("(","");
            correctParts[1] = correctParts[1].replace(")","");

            userParts[0] = userParts[0].replace("(","");
            userParts[1] = userParts[1].replace(")","");

            // Check both possible orders
            if(
                (userParts[0] === correctParts[0] && userParts[1] === correctParts[1]) ||
                (userParts[0] === correctParts[1] && userParts[1] === correctParts[0])
            ){
                isCorrect = true;
            }
        }
    }
    else {
        if(userAnswer === correct){
            isCorrect = true;
        }
    }

    if(isCorrect){
        score++;
        feedback.innerText = "Correct!";
        document.getElementById("score").innerText = "Score: "+score;
    } else {
        feedback.innerText = "Incorrect. Correct: "+currentAnswer;
    }

    document.getElementById("answerInput").value = "";
}
